<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles/main.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
     integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <title>Books Heaven</title>
</head>
<body>
    <main>
        <nav class="navbar  navbar-expand-lg" style="background-color: #DDA853;">
            <div class="container">
              <!-- Logo and Title Section -->
              <a class="navbar-brand d-flex align-items-center" href="/">
                <img src="/assets/icons/book-heaven.png" alt="Book Heaven Icon" width="100" height="50" class="d-inline-block align-top me-2">
                <span class="fs-3 fw-bold" style="font-family: 'Georgia', serif; color: #27548A; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);">Books Heaven</span>
              </a>
            </div>
        </nav>    
        <section class="container mt-4" style="background-color: #aed0f1; padding: 20px; border-radius: 10px;">
            <h1><%= book.book_name %> - By <%= book.author %></h1>
            
            <div class="row">
                <% if (book.isbn) { %>
                    <div class="col-md-3 book-info-container">
                        <div class="book-meta mb-4">
                            <p><strong> ISBN: <%= book.isbn %> </strong></p>
                            <p><strong> DATE READ: <%= book.formatted_date %> </strong></p>
                            <p><strong>HOW STRONGLY I RECOMMEND IT: <%= book.recommendation %>/10 </strong></p>
                        </div>
                        <img src="<%= book.coverUrl %>" alt="<%= book.book_name %> cover" class="img-fluid mb-3"
                             onerror="this.onerror=null;this.src='/public/images/no-cover.jpg'">

                             <div class="mt-4">
                                <a href="/" class="btn btn-primary"><strong>Back to all books </strong></a>
                            </div>
                    </div>
                <% } %>
                
                <div class="col-md-9 notes-container mt-5">
                    <% if (notes.length > 0) { %>
                        <% notes.forEach(note => { %>
                            <div class="card note-card" style="margin-bottom: 20px; background-color: #e9eea8;">
                                <div class="card-body p-3">
                                    <div class="note-content">
                                        <%- note.note.replace(/\n/g, '<br>') %>
                                    </div>
                                    <div class="note-date text-muted mt-2">
                                        <small><%= note.created_at.toISOString().split('T')[0] %></small>
                                    </div>
                                </div>
                            </div>
                        <% }); %>
                    <% } else { %>
                        <div class="alert alert-info">No notes available for this book.</div>
                    <% } %>
                </div>
            </div>
            
            
        </section>
        
        <%- include('partials/footer.ejs'); %>
</body>
</html>